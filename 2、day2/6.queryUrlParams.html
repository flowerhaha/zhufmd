<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    // let url = 'http://www.baidu.com?name=erya&age=18&sex=0#index';
   let url =  'https://www.baidu.com/s?wd=mdn&rsv_spt=1&rsv_iqid=0xf3f9db1b000b258f&issp=1&f=8&rsv_bp=1&rsv_idx=2&ie=utf-8&tn=baiduhome_pg&rsv_enter=1&rsv_dl=tb&rsv_sug3=4&rsv_sug1=3&rsv_sug7=100&rsv_sug2=0&rsv_btype=i&prefixsug=mdn&rsp=5&inputT=951&rsv_sug4=1922'

    function queryUrlParams(){
      // 写一个正则先把当前url里的所有参数捕获到
      let reg = /([^?=&#]+)=([^?=&#]+)/g;
      // console.log(this.match(reg));
      let obj = {} // 一会把每一个参数增加到这个对象里
      // 处理参数
      this.replace(reg,(...ary)=>{
        let [,key,value] = ary; // 把每一次捕获到的属性名和属性值拿到
        obj[key] = value; // 给obj新增键值对
      });

      // 处理hash值
      this.replace(/#([^?=&#]+)/g,(...ary)=>{
        obj['hash'] = ary[1]
      })
      console.log(obj);

    }
    String.prototype.queryUrlParams = queryUrlParams;
    url.queryUrlParams() // {name:'erya',age:'18',sex:'0',hash:'index'}


  </script>
</body>
</html>